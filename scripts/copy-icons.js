const fs = require('fs');
const path = require('path');

const iconSource = 'nodes/SeRanking/seranking.svg';
const iconDest = 'dist/nodes/SeRanking/seranking.svg';

// Ensure destination directory exists
const destDir = path.dirname(iconDest);
if (!fs.existsSync(destDir)) {
    fs.mkdirSync(destDir, { recursive: true });
}

// Copy icon if it exists
if (fs.existsSync(iconSource)) {
    fs.copyFileSync(iconSource, iconDest);
    console.log('✅ Icon copied successfully');
} else {
    console.log('⚠️  Icon not found at', iconSource);
    console.log('   Creating placeholder icon...');
    
    // Create a simple placeholder icon
    const placeholderSvg = `<?xml version="1.0" encoding="UTF-8"?>
<svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="100" height="100">
<path d="M0 0 C33 0 66 0 100 0 C100 33 100 66 100 100 C67 100 34 100 0 100 C0 67 0 34 0 0 Z " fill="#123AF8" transform="translate(0,0)"/>
<path d="M0 0 C2.32849974 2.32849974 1.88976398 6.58005112 2.02441406 9.70385742 C1.7575027 17.04998613 -2.54423971 20.81482648 -7.66821289 25.60620117 C-13.12621684 30.43860935 -16.46675285 32.25875633 -23.953125 32.1953125 C-24.61334656 32.1924826 -25.27356812 32.18965271 -25.95379639 32.18673706 C-28.05271897 32.17558415 -30.15120742 32.15048946 -32.25 32.125 C-33.67707715 32.11496384 -35.10416102 32.1058391 -36.53125 32.09765625 C-40.02097328 32.07566111 -43.51044423 32.04116536 -47 32 C-41.76636873 25.76129422 -36.35356926 19.69382768 -30.74511719 13.79077148 C-29.66705845 12.64074469 -28.60462624 11.47586294 -27.55859375 10.29663086 C-19.11519234 0.80706239 -12.74587141 -2.12034308 0 0 Z " fill="#F9FAFE" transform="translate(65,15)"/>
<path d="M0 0 C1.02150398 0.00636726 1.02150398 0.00636726 2.06364441 0.01286316 C4.22383334 0.02956265 6.38306517 0.06719563 8.54296875 0.10546875 C10.01365833 0.12052701 11.48436264 0.13421341 12.95507812 0.14648438 C16.54718232 0.17943661 20.13873201 0.23115702 23.73046875 0.29296875 C19.55764529 5.26870293 15.21519448 9.95601662 10.6171875 14.5390625 C9.96216751 15.19503922 9.30714752 15.85101593 8.63227844 16.52687073 C7.2612068 17.89861777 5.88889202 19.26912335 4.51538086 20.63842773 C2.40295774 22.74544132 0.29599267 24.85780901 -1.81054688 26.97070312 C-3.14681443 28.3063108 -4.48339166 29.64160874 -5.8203125 30.9765625 C-6.76865715 31.9279435 -6.76865715 31.9279435 -7.73616028 32.89854431 C-12.15454881 37.29296875 -12.15454881 37.29296875 -13.26953125 37.29296875 C-13.76453125 29.86796875 -13.76453125 29.86796875 -14.26953125 22.29296875 C-21.19953125 21.79796875 -21.19953125 21.79796875 -28.26953125 21.29296875 C-26.62453816 18.00298258 -25.65587716 16.42392127 -23.1875 13.9453125 C-22.58486328 13.34009766 -21.98222656 12.73488281 -21.36132812 12.11132812 C-20.73291016 11.49064453 -20.10449219 10.86996094 -19.45703125 10.23046875 C-18.84021484 9.60591797 -18.22339844 8.98136719 -17.58789062 8.33789062 C-16.98138672 7.73396484 -16.37488281 7.13003906 -15.75 6.5078125 C-14.92858521 5.68978149 -14.92858521 5.68978149 -14.09057617 4.85522461 C-9.40938514 0.83927858 -6.19087176 -0.07643052 0 0 Z " fill="#F6F7FE" transform="translate(58.26953125,47.70703125)"/>
</svg>`;
    
    fs.writeFileSync(iconDest, placeholderSvg);
    console.log('✅ Placeholder icon created');
}